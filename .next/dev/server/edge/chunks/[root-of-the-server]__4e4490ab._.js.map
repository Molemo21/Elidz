{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 16, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/lib/supabase/middleware.ts"],"sourcesContent":["import { createServerClient } from '@supabase/ssr'\nimport { NextResponse, type NextRequest } from 'next/server'\nimport type { Database } from './database.types'\n\nexport async function updateSession(request: NextRequest) {\n  let supabaseResponse = NextResponse.next({\n    request,\n  })\n\n  const supabase = createServerClient<Database>(\n    process.env.NEXT_PUBLIC_SUPABASE_URL!,\n    process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!,\n    {\n      cookies: {\n        getAll() {\n          return request.cookies.getAll()\n        },\n        setAll(cookiesToSet) {\n          // Update request cookies first\n          cookiesToSet.forEach(({ name, value, options }) => {\n            request.cookies.set(name, value)\n          })\n          \n          // Create new response with updated cookies\n          supabaseResponse = NextResponse.next({\n            request,\n          })\n          \n          // Set all cookies on the response with proper options\n          cookiesToSet.forEach(({ name, value, options }) => {\n            supabaseResponse.cookies.set(name, value, {\n              ...options,\n              httpOnly: options?.httpOnly ?? true,\n              secure: options?.secure ?? (process.env.NODE_ENV === 'production'),\n              sameSite: (options?.sameSite as 'lax' | 'strict' | 'none') ?? 'lax',\n              path: options?.path ?? '/',\n            })\n          })\n        },\n      },\n    }\n  )\n\n  // Refresh session if expired - required for Server Components\n  // This will read from cookies and refresh if needed\n  // It will also trigger setAll if cookies need to be updated\n  try {\n    const { data: { user }, error } = await supabase.auth.getUser()\n    \n    if (error && error.message !== 'Auth session missing!') {\n      console.warn('[Middleware] getUser() error:', {\n        message: error.message,\n        status: error.status,\n      })\n    }\n    \n    // If we have a user, the session is valid\n    if (user) {\n      // Session is valid, cookies are set\n      return supabaseResponse\n    }\n  } catch (error: any) {\n    // If getUser fails, the session might not be in cookies yet\n    // This is okay - the client-side session will be synced on next request\n    if (error?.message !== 'Auth session missing!') {\n      console.warn('[Middleware] Could not get user from cookies:', error?.message || error)\n    }\n  }\n\n  return supabaseResponse\n}\n\n"],"names":[],"mappings":";;;;AAAA;AACA;AAAA;;;AAGO,eAAe,cAAc,OAAoB;IACtD,IAAI,mBAAmB,+TAAY,CAAC,IAAI,CAAC;QACvC;IACF;IAEA,MAAM,WAAW,IAAA,8SAAkB,sUAGjC;QACE,SAAS;YACP;gBACE,OAAO,QAAQ,OAAO,CAAC,MAAM;YAC/B;YACA,QAAO,YAAY;gBACjB,+BAA+B;gBAC/B,aAAa,OAAO,CAAC,CAAC,EAAE,IAAI,EAAE,KAAK,EAAE,OAAO,EAAE;oBAC5C,QAAQ,OAAO,CAAC,GAAG,CAAC,MAAM;gBAC5B;gBAEA,2CAA2C;gBAC3C,mBAAmB,+TAAY,CAAC,IAAI,CAAC;oBACnC;gBACF;gBAEA,sDAAsD;gBACtD,aAAa,OAAO,CAAC,CAAC,EAAE,IAAI,EAAE,KAAK,EAAE,OAAO,EAAE;oBAC5C,iBAAiB,OAAO,CAAC,GAAG,CAAC,MAAM,OAAO;wBACxC,GAAG,OAAO;wBACV,UAAU,SAAS,YAAY;wBAC/B,QAAQ,SAAS,UAAW,oDAAyB;wBACrD,UAAU,AAAC,SAAS,YAA0C;wBAC9D,MAAM,SAAS,QAAQ;oBACzB;gBACF;YACF;QACF;IACF;IAGF,8DAA8D;IAC9D,oDAAoD;IACpD,4DAA4D;IAC5D,IAAI;QACF,MAAM,EAAE,MAAM,EAAE,IAAI,EAAE,EAAE,KAAK,EAAE,GAAG,MAAM,SAAS,IAAI,CAAC,OAAO;QAE7D,IAAI,SAAS,MAAM,OAAO,KAAK,yBAAyB;YACtD,QAAQ,IAAI,CAAC,iCAAiC;gBAC5C,SAAS,MAAM,OAAO;gBACtB,QAAQ,MAAM,MAAM;YACtB;QACF;QAEA,0CAA0C;QAC1C,IAAI,MAAM;YACR,oCAAoC;YACpC,OAAO;QACT;IACF,EAAE,OAAO,OAAY;QACnB,4DAA4D;QAC5D,wEAAwE;QACxE,IAAI,OAAO,YAAY,yBAAyB;YAC9C,QAAQ,IAAI,CAAC,iDAAiD,OAAO,WAAW;QAClF;IACF;IAEA,OAAO;AACT"}},
    {"offset": {"line": 85, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/middleware.ts"],"sourcesContent":["import { type NextRequest } from 'next/server'\r\nimport { updateSession } from '@/lib/supabase/middleware'\r\n\r\nexport async function middleware(request: NextRequest) {\r\n  return await updateSession(request)\r\n}\r\n\r\nexport const config = {\r\n  matcher: [\r\n    /*\r\n     * Match all request paths except for the ones starting with:\r\n     * - _next/static (static files)\r\n     * - _next/image (image optimization files)\r\n     * - favicon.ico (favicon file)\r\n     * - public folder\r\n     */\r\n    '/((?!_next/static|_next/image|favicon.ico|.*\\\\.(?:svg|png|jpg|jpeg|gif|webp)$).*)',\r\n  ],\r\n}\r\n\r\n"],"names":[],"mappings":";;;;;;AACA;;AAEO,eAAe,WAAW,OAAoB;IACnD,OAAO,MAAM,IAAA,sJAAa,EAAC;AAC7B;AAEO,MAAM,SAAS;IACpB,SAAS;QACP;;;;;;KAMC,GACD;KACD;AACH"}}]
}