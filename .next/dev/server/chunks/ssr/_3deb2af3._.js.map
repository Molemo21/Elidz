{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/liqui/OneDrive/Desktop/ai-funding-platform/lib/supabase/server.ts"],"sourcesContent":["import { createServerClient } from '@supabase/ssr'\r\nimport { cookies } from 'next/headers'\r\nimport type { Database } from './database.types'\r\n\r\nexport async function createClient() {\r\n  const cookieStore = await cookies()\r\n\r\n  return createServerClient<Database>(\r\n    process.env.NEXT_PUBLIC_SUPABASE_URL!,\r\n    process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!,\r\n    {\r\n      cookies: {\r\n        getAll() {\r\n          return cookieStore.getAll()\r\n        },\r\n        setAll(cookiesToSet) {\r\n          try {\r\n            cookiesToSet.forEach(({ name, value, options }) =>\r\n              cookieStore.set(name, value, options)\r\n            )\r\n          } catch {\r\n            // The `setAll` method was called from a Server Component.\r\n            // This can be ignored if you have middleware refreshing\r\n            // user sessions.\r\n          }\r\n        },\r\n      },\r\n    }\r\n  )\r\n}\r\n\r\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAGO,eAAe;IACpB,MAAM,cAAc,MAAM,IAAA,yQAAO;IAEjC,OAAO,IAAA,sSAAkB,sUAGvB;QACE,SAAS;YACP;gBACE,OAAO,YAAY,MAAM;YAC3B;YACA,QAAO,YAAY;gBACjB,IAAI;oBACF,aAAa,OAAO,CAAC,CAAC,EAAE,IAAI,EAAE,KAAK,EAAE,OAAO,EAAE,GAC5C,YAAY,GAAG,CAAC,MAAM,OAAO;gBAEjC,EAAE,OAAM;gBACN,0DAA0D;gBAC1D,wDAAwD;gBACxD,iBAAiB;gBACnB;YACF;QACF;IACF;AAEJ"}},
    {"offset": {"line": 35, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/liqui/OneDrive/Desktop/ai-funding-platform/app/actions/create-user-record.ts"],"sourcesContent":["'use server'\r\n\r\nimport { createClient } from '@/lib/supabase/server'\r\n\r\n/**\r\n * Server action to create user record after signup\r\n * Uses the system function via RPC which bypasses RLS\r\n * This is a reliable backup in case the trigger doesn't fire immediately\r\n */\r\nexport async function createUserRecord(userId: string, userData: {\r\n  email: string\r\n  role: 'smme' | 'admin'\r\n  firstName: string\r\n  lastName: string\r\n  phone: string\r\n}) {\r\n  try {\r\n    const supabase = await createClient()\r\n\r\n    // Check if user record already exists\r\n    const { data: existingUser } = await supabase\r\n      .from('users')\r\n      .select('id')\r\n      .eq('id', userId)\r\n      .maybeSingle()\r\n\r\n    if (existingUser) {\r\n      return {\r\n        success: true,\r\n        message: 'User record already exists',\r\n        data: existingUser,\r\n      }\r\n    }\r\n\r\n    // Use the system function via RPC (bypasses RLS)\r\n    // This function uses SECURITY DEFINER and doesn't require auth check\r\n    const { data, error } = await (supabase as any).rpc('create_user_record_system', {\r\n      user_id: userId,\r\n      user_email: userData.email,\r\n      user_role: userData.role,\r\n      user_first_name: userData.firstName,\r\n      user_last_name: userData.lastName,\r\n      user_phone: userData.phone,\r\n    })\r\n\r\n    if (error) {\r\n      // If duplicate key error, record exists (race condition - trigger created it)\r\n      if (error.code === '23505') {\r\n        return {\r\n          success: true,\r\n          message: 'User record already exists (created by trigger)',\r\n        }\r\n      }\r\n\r\n      console.error('Failed to create user record via RPC:', {\r\n        code: error.code,\r\n        message: error.message,\r\n        details: error.details,\r\n      })\r\n\r\n      return {\r\n        success: false,\r\n        error: error.message || 'Failed to create user record',\r\n      }\r\n    }\r\n\r\n    return {\r\n      success: true,\r\n      message: 'User record created successfully',\r\n      data: { id: data || userId },\r\n    }\r\n  } catch (error: any) {\r\n    console.error('Error in createUserRecord:', error)\r\n    return {\r\n      success: false,\r\n      error: error.message || 'Failed to create user record',\r\n    }\r\n  }\r\n}\r\n\r\n"],"names":[],"mappings":";;;;;AAEA;;;;AAOO,eAAe,iBAAiB,MAAc,EAAE,QAMtD;IACC,IAAI;QACF,MAAM,WAAW,MAAM,IAAA,yIAAY;QAEnC,sCAAsC;QACtC,MAAM,EAAE,MAAM,YAAY,EAAE,GAAG,MAAM,SAClC,IAAI,CAAC,SACL,MAAM,CAAC,MACP,EAAE,CAAC,MAAM,QACT,WAAW;QAEd,IAAI,cAAc;YAChB,OAAO;gBACL,SAAS;gBACT,SAAS;gBACT,MAAM;YACR;QACF;QAEA,iDAAiD;QACjD,qEAAqE;QACrE,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,AAAC,SAAiB,GAAG,CAAC,6BAA6B;YAC/E,SAAS;YACT,YAAY,SAAS,KAAK;YAC1B,WAAW,SAAS,IAAI;YACxB,iBAAiB,SAAS,SAAS;YACnC,gBAAgB,SAAS,QAAQ;YACjC,YAAY,SAAS,KAAK;QAC5B;QAEA,IAAI,OAAO;YACT,8EAA8E;YAC9E,IAAI,MAAM,IAAI,KAAK,SAAS;gBAC1B,OAAO;oBACL,SAAS;oBACT,SAAS;gBACX;YACF;YAEA,QAAQ,KAAK,CAAC,yCAAyC;gBACrD,MAAM,MAAM,IAAI;gBAChB,SAAS,MAAM,OAAO;gBACtB,SAAS,MAAM,OAAO;YACxB;YAEA,OAAO;gBACL,SAAS;gBACT,OAAO,MAAM,OAAO,IAAI;YAC1B;QACF;QAEA,OAAO;YACL,SAAS;YACT,SAAS;YACT,MAAM;gBAAE,IAAI,QAAQ;YAAO;QAC7B;IACF,EAAE,OAAO,OAAY;QACnB,QAAQ,KAAK,CAAC,8BAA8B;QAC5C,OAAO;YACL,SAAS;YACT,OAAO,MAAM,OAAO,IAAI;QAC1B;IACF;AACF;;;IArEsB;;AAAA,8WAAA"}},
    {"offset": {"line": 108, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/liqui/OneDrive/Desktop/ai-funding-platform/lib/supabase/auth-helpers.ts"],"sourcesContent":["import { createClient } from './server'\r\nimport { redirect } from 'next/navigation'\r\nimport type { AuthUser } from '@/lib/auth'\r\n\r\nexport async function getServerSession(): Promise<AuthUser | null> {\r\n  try {\r\n    const supabase = await createClient()\r\n    \r\n    // Try getSession first - this reads from cookies\r\n    const { data: { session }, error: sessionError } = await supabase.auth.getSession()\r\n    \r\n    if (sessionError) {\r\n      console.error('[getServerSession] Session error:', {\r\n        message: sessionError.message,\r\n        status: sessionError.status,\r\n        code: sessionError.status,\r\n      })\r\n    }\r\n    \r\n    // If we have a session, use it\r\n    if (session?.user) {\r\n      console.log('[getServerSession] Session found via getSession(), user ID:', session.user.id)\r\n      const { data: profile, error: profileError } = await supabase\r\n        .from('users')\r\n        .select('id, email, role, first_name, last_name, approved')\r\n        .eq('id', session.user.id)\r\n        .maybeSingle()\r\n\r\n      if (profileError) {\r\n        console.error('[getServerSession] Profile query error:', {\r\n          message: profileError.message,\r\n          code: profileError.code,\r\n          details: profileError.details,\r\n        })\r\n        return null\r\n      }\r\n\r\n      if (!profile) {\r\n        console.warn('[getServerSession] Profile not found for user:', session.user.id)\r\n        return null\r\n      }\r\n\r\n      return {\r\n        id: profile.id,\r\n        email: profile.email,\r\n        role: profile.role,\r\n        name: `${profile.first_name} ${profile.last_name}`,\r\n        approved: profile.approved,\r\n      }\r\n    }\r\n    \r\n    // Fallback: try getUser() which might work if session is in headers\r\n    // This is more reliable as it validates the token\r\n    console.log('[getServerSession] No session from getSession(), trying getUser()...')\r\n    const { data: { user }, error } = await supabase.auth.getUser()\r\n    \r\n    if (error) {\r\n      // Log error but don't treat it as fatal - might be missing cookies\r\n      console.log('[getServerSession] getUser() error (this is normal if cookies not synced):', {\r\n        message: error.message,\r\n        status: error.status,\r\n      })\r\n      return null\r\n    }\r\n    \r\n    if (!user) {\r\n      console.log('[getServerSession] No user found via getUser()')\r\n      return null\r\n    }\r\n    \r\n    console.log('[getServerSession] User found via getUser(), user ID:', user.id)\r\n\r\n    const { data: profile, error: profileError } = await supabase\r\n      .from('users')\r\n      .select('id, email, role, first_name, last_name, approved')\r\n      .eq('id', user.id)\r\n      .maybeSingle()\r\n\r\n    if (profileError) {\r\n      console.error('[getServerSession] Profile query error:', {\r\n        message: profileError.message,\r\n        code: profileError.code,\r\n        details: profileError.details,\r\n      })\r\n      return null\r\n    }\r\n\r\n    if (!profile) {\r\n      console.warn('[getServerSession] Profile not found for user:', user.id)\r\n      return null\r\n    }\r\n\r\n    return {\r\n      id: profile.id,\r\n      email: profile.email,\r\n      role: profile.role,\r\n      name: `${profile.first_name} ${profile.last_name}`,\r\n      approved: profile.approved,\r\n    }\r\n  } catch (error: any) {\r\n    // Catch any unexpected errors\r\n    console.error('[getServerSession] Unexpected error:', {\r\n      message: error?.message,\r\n      stack: error?.stack,\r\n    })\r\n    return null\r\n  }\r\n}\r\n\r\nexport async function requireAuth(): Promise<AuthUser> {\r\n  const session = await getServerSession()\r\n  \r\n  if (!session) {\r\n    redirect('/login')\r\n  }\r\n  \r\n  return session\r\n}\r\n\r\nexport async function requireAdmin(): Promise<AuthUser> {\r\n  const session = await getServerSession()\r\n  \r\n  if (!session) {\r\n    redirect('/login')\r\n  }\r\n  \r\n  if (session.role !== 'admin') {\r\n    redirect('/dashboard')\r\n  }\r\n  \r\n  return session\r\n}\r\n\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 224, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/liqui/OneDrive/Desktop/ai-funding-platform/lib/db/queries.ts"],"sourcesContent":["// Reusable query helpers with consistent error handling\r\n// These provide a standardized way to interact with the database\r\n\r\nimport { createClient } from '@/lib/supabase/server'\r\nimport type { Database } from '@/lib/supabase/database.types'\r\n\r\n/**\r\n * Generic result type for all queries\r\n */\r\nexport type QueryResult<T> = {\r\n  success: boolean\r\n  data?: T\r\n  error?: string\r\n  code?: string\r\n}\r\n\r\n/**\r\n * Generic error handler for Supabase errors\r\n * Maps common error codes to user-friendly messages\r\n */\r\nfunction handleSupabaseError<T>(error: any): QueryResult<T> {\r\n  // Unique constraint violation (duplicate key)\r\n  if (error?.code === '23505') {\r\n    return { success: false, error: 'Record already exists', code: 'DUPLICATE' }\r\n  }\r\n  \r\n  // Foreign key violation\r\n  if (error?.code === '23503') {\r\n    return { success: false, error: 'Referenced record does not exist', code: 'FOREIGN_KEY' }\r\n  }\r\n  \r\n  // Not found\r\n  if (error?.code === 'PGRST116') {\r\n    return { success: false, error: 'Record not found', code: 'NOT_FOUND' }\r\n  }\r\n  \r\n  // Permission denied (RLS)\r\n  if (error?.code === '42501' || error?.message?.includes('permission denied')) {\r\n    return { success: false, error: 'Permission denied', code: 'PERMISSION_DENIED' }\r\n  }\r\n  \r\n  // Generic error\r\n  return { \r\n    success: false, \r\n    error: error?.message || 'Database operation failed',\r\n    code: error?.code \r\n  }\r\n}\r\n\r\n// ============================================================================\r\n// USER PROFILE QUERIES\r\n// ============================================================================\r\n\r\nexport const userProfileQueries = {\r\n  /**\r\n   * Get user profile by user ID\r\n   */\r\n  async getByUserId(\r\n    userId: string\r\n  ): Promise<QueryResult<Database['public']['Tables']['user_profiles']['Row']>> {\r\n    try {\r\n      const supabase = await createClient()\r\n      const { data, error } = await supabase\r\n        .from('user_profiles')\r\n        .select('*')\r\n        .eq('user_id', userId)\r\n        .maybeSingle()\r\n\r\n      if (error) return handleSupabaseError(error)\r\n      if (!data) return { success: false, error: 'Profile not found', code: 'NOT_FOUND' }\r\n      \r\n      return { success: true, data }\r\n    } catch (error: any) {\r\n      return handleSupabaseError(error)\r\n    }\r\n  },\r\n\r\n  /**\r\n   * Upsert user profile (create or update)\r\n   */\r\n  async upsert(\r\n    userId: string,\r\n    profile: Database['public']['Tables']['user_profiles']['Insert']\r\n  ): Promise<QueryResult<Database['public']['Tables']['user_profiles']['Row']>> {\r\n    try {\r\n      const supabase = await createClient()\r\n      const { data, error } = await supabase\r\n        .from('user_profiles')\r\n        .upsert(\r\n          { ...profile, user_id: userId },\r\n          { onConflict: 'user_id' }\r\n        )\r\n        .select()\r\n        .single()\r\n\r\n      if (error) return handleSupabaseError(error)\r\n      return { success: true, data: data! }\r\n    } catch (error: any) {\r\n      return handleSupabaseError(error)\r\n    }\r\n  },\r\n\r\n  /**\r\n   * Update user profile (partial update)\r\n   */\r\n  async update(\r\n    userId: string,\r\n    updates: Database['public']['Tables']['user_profiles']['Update']\r\n  ): Promise<QueryResult<Database['public']['Tables']['user_profiles']['Row']>> {\r\n    try {\r\n      const supabase = await createClient()\r\n      const { data, error } = await supabase\r\n        .from('user_profiles')\r\n        .update(updates)\r\n        .eq('user_id', userId)\r\n        .select()\r\n        .single()\r\n\r\n      if (error) return handleSupabaseError(error)\r\n      if (!data) return { success: false, error: 'Profile not found', code: 'NOT_FOUND' }\r\n      \r\n      return { success: true, data }\r\n    } catch (error: any) {\r\n      return handleSupabaseError(error)\r\n    }\r\n  },\r\n\r\n  /**\r\n   * Check if profile is complete (has all required onboarding data)\r\n   */\r\n  async isComplete(userId: string): Promise<boolean> {\r\n    try {\r\n      const result = await this.getByUserId(userId)\r\n      if (!result.success || !result.data) return false\r\n\r\n      const profile = result.data\r\n      \r\n      // Check required fields\r\n      const required = [\r\n        profile.company_name,\r\n        profile.registration_number,\r\n        profile.industry,\r\n        profile.business_description,\r\n        profile.location,\r\n        profile.annual_revenue,\r\n        profile.employees_count,\r\n        profile.years_in_business,\r\n        profile.funding_requirements\r\n      ]\r\n\r\n      if (required.some(field => field === null || field === undefined || field === '')) {\r\n        return false\r\n      }\r\n\r\n      // Validate funding_requirements structure\r\n      const fundingReqs = profile.funding_requirements as any\r\n      if (!fundingReqs?.amount_needed || !fundingReqs?.funding_purpose) {\r\n        return false\r\n      }\r\n\r\n      return true\r\n    } catch {\r\n      return false\r\n    }\r\n  }\r\n}\r\n\r\n// ============================================================================\r\n// USER QUERIES\r\n// ============================================================================\r\n\r\nexport const userQueries = {\r\n  /**\r\n   * Get all users (admin only - caller must verify admin status)\r\n   */\r\n  async getAll(): Promise<QueryResult<Database['public']['Tables']['users']['Row'][]>> {\r\n    try {\r\n      const supabase = await createClient()\r\n      const { data, error } = await supabase\r\n        .from('users')\r\n        .select('*')\r\n        .order('created_at', { ascending: false })\r\n\r\n      if (error) return handleSupabaseError(error)\r\n      return { success: true, data: data || [] }\r\n    } catch (error: any) {\r\n      return handleSupabaseError(error)\r\n    }\r\n  },\r\n\r\n  /**\r\n   * Get user by ID\r\n   */\r\n  async getById(\r\n    userId: string\r\n  ): Promise<QueryResult<Database['public']['Tables']['users']['Row']>> {\r\n    try {\r\n      const supabase = await createClient()\r\n      const { data, error } = await supabase\r\n        .from('users')\r\n        .select('*')\r\n        .eq('id', userId)\r\n        .maybeSingle()\r\n\r\n      if (error) return handleSupabaseError(error)\r\n      if (!data) return { success: false, error: 'User not found', code: 'NOT_FOUND' }\r\n      \r\n      return { success: true, data }\r\n    } catch (error: any) {\r\n      return handleSupabaseError(error)\r\n    }\r\n  },\r\n\r\n  /**\r\n   * Get user by email\r\n   */\r\n  async getByEmail(\r\n    email: string\r\n  ): Promise<QueryResult<Database['public']['Tables']['users']['Row']>> {\r\n    try {\r\n      const supabase = await createClient()\r\n      const { data, error } = await supabase\r\n        .from('users')\r\n        .select('*')\r\n        .eq('email', email)\r\n        .maybeSingle()\r\n\r\n      if (error) return handleSupabaseError(error)\r\n      if (!data) return { success: false, error: 'User not found', code: 'NOT_FOUND' }\r\n      \r\n      return { success: true, data }\r\n    } catch (error: any) {\r\n      return handleSupabaseError(error)\r\n    }\r\n  },\r\n\r\n  /**\r\n   * Update user approval status\r\n   */\r\n  async updateApproval(\r\n    userId: string,\r\n    approved: boolean\r\n  ): Promise<QueryResult<Database['public']['Tables']['users']['Row']>> {\r\n    try {\r\n      const supabase = await createClient()\r\n      const { data, error } = await supabase\r\n        .from('users')\r\n        .update({ approved })\r\n        .eq('id', userId)\r\n        .select()\r\n        .single()\r\n\r\n      if (error) return handleSupabaseError(error)\r\n      if (!data) return { success: false, error: 'User not found', code: 'NOT_FOUND' }\r\n      \r\n      return { success: true, data }\r\n    } catch (error: any) {\r\n      return handleSupabaseError(error)\r\n    }\r\n  },\r\n\r\n  /**\r\n   * Update user last login timestamp\r\n   */\r\n  async updateLastLogin(userId: string): Promise<QueryResult<Database['public']['Tables']['users']['Row']>> {\r\n    try {\r\n      const supabase = await createClient()\r\n      const { data, error } = await supabase\r\n        .from('users')\r\n        .update({ last_login: new Date().toISOString() })\r\n        .eq('id', userId)\r\n        .select()\r\n        .single()\r\n\r\n      if (error) return handleSupabaseError(error)\r\n      return { success: true, data: data! }\r\n    } catch (error: any) {\r\n      return handleSupabaseError(error)\r\n    }\r\n  }\r\n}\r\n\r\n// ============================================================================\r\n// FUNDING OPPORTUNITY QUERIES\r\n// ============================================================================\r\n\r\nexport const opportunityQueries = {\r\n  /**\r\n   * Get all opportunities\r\n   */\r\n  async getAll(): Promise<QueryResult<Database['public']['Tables']['funding_opportunities']['Row'][]>> {\r\n    try {\r\n      const supabase = await createClient()\r\n      const { data, error } = await supabase\r\n        .from('funding_opportunities')\r\n        .select('*')\r\n        .order('created_at', { ascending: false })\r\n\r\n      if (error) return handleSupabaseError(error)\r\n      return { success: true, data: data || [] }\r\n    } catch (error: any) {\r\n      return handleSupabaseError(error)\r\n    }\r\n  },\r\n\r\n  /**\r\n   * Get opportunity by ID\r\n   */\r\n  async getById(\r\n    opportunityId: string\r\n  ): Promise<QueryResult<Database['public']['Tables']['funding_opportunities']['Row']>> {\r\n    try {\r\n      const supabase = await createClient()\r\n      const { data, error } = await supabase\r\n        .from('funding_opportunities')\r\n        .select('*')\r\n        .eq('id', opportunityId)\r\n        .maybeSingle()\r\n\r\n      if (error) return handleSupabaseError(error)\r\n      if (!data) return { success: false, error: 'Opportunity not found', code: 'NOT_FOUND' }\r\n      \r\n      return { success: true, data }\r\n    } catch (error: any) {\r\n      return handleSupabaseError(error)\r\n    }\r\n  },\r\n\r\n  /**\r\n   * Get opportunities by industry\r\n   */\r\n  async getByIndustry(\r\n    industry: string\r\n  ): Promise<QueryResult<Database['public']['Tables']['funding_opportunities']['Row'][]>> {\r\n    try {\r\n      const supabase = await createClient()\r\n      const { data, error } = await supabase\r\n        .from('funding_opportunities')\r\n        .select('*')\r\n        .contains('industry_focus', [industry])\r\n        .order('created_at', { ascending: false })\r\n\r\n      if (error) return handleSupabaseError(error)\r\n      return { success: true, data: data || [] }\r\n    } catch (error: any) {\r\n      return handleSupabaseError(error)\r\n    }\r\n  },\r\n\r\n  /**\r\n   * Get active opportunities (deadline in future)\r\n   */\r\n  async getActive(): Promise<QueryResult<Database['public']['Tables']['funding_opportunities']['Row'][]>> {\r\n    try {\r\n      const supabase = await createClient()\r\n      const now = new Date().toISOString()\r\n      const { data, error } = await supabase\r\n        .from('funding_opportunities')\r\n        .select('*')\r\n        .gt('deadline', now)\r\n        .order('deadline', { ascending: true })\r\n\r\n      if (error) return handleSupabaseError(error)\r\n      return { success: true, data: data || [] }\r\n    } catch (error: any) {\r\n      return handleSupabaseError(error)\r\n    }\r\n  }\r\n}\r\n\r\n// ============================================================================\r\n// MATCH QUERIES\r\n// ============================================================================\r\n\r\nexport const matchQueries = {\r\n  /**\r\n   * Get matches for user\r\n   */\r\n  async getByUserId(\r\n    userId: string\r\n  ): Promise<QueryResult<Database['public']['Tables']['matches']['Row'][]>> {\r\n    try {\r\n      const supabase = await createClient()\r\n      const { data, error } = await supabase\r\n        .from('matches')\r\n        .select('*')\r\n        .eq('user_id', userId)\r\n        .order('match_score', { ascending: false })\r\n\r\n      if (error) return handleSupabaseError(error)\r\n      return { success: true, data: data || [] }\r\n    } catch (error: any) {\r\n      return handleSupabaseError(error)\r\n    }\r\n  },\r\n\r\n  /**\r\n   * Update match status\r\n   */\r\n  async updateStatus(\r\n    matchId: string,\r\n    status: Database['public']['Tables']['matches']['Row']['status']\r\n  ): Promise<QueryResult<Database['public']['Tables']['matches']['Row']>> {\r\n    try {\r\n      const supabase = await createClient()\r\n      const updateData: any = { status }\r\n      if (status === 'viewed') {\r\n        updateData.viewed_at = new Date().toISOString()\r\n      }\r\n\r\n      const { data, error } = await supabase\r\n        .from('matches')\r\n        .update(updateData)\r\n        .eq('id', matchId)\r\n        .select()\r\n        .single()\r\n\r\n      if (error) return handleSupabaseError(error)\r\n      if (!data) return { success: false, error: 'Match not found', code: 'NOT_FOUND' }\r\n      \r\n      return { success: true, data }\r\n    } catch (error: any) {\r\n      return handleSupabaseError(error)\r\n    }\r\n  }\r\n}\r\n\r\n// ============================================================================\r\n// APPLICATION QUERIES\r\n// ============================================================================\r\n\r\nexport const applicationQueries = {\r\n  /**\r\n   * Get applications for user\r\n   */\r\n  async getByUserId(\r\n    userId: string\r\n  ): Promise<QueryResult<Database['public']['Tables']['applications']['Row'][]>> {\r\n    try {\r\n      const supabase = await createClient()\r\n      const { data, error } = await supabase\r\n        .from('applications')\r\n        .select('*')\r\n        .eq('user_id', userId)\r\n        .order('created_at', { ascending: false })\r\n\r\n      if (error) return handleSupabaseError(error)\r\n      return { success: true, data: data || [] }\r\n    } catch (error: any) {\r\n      return handleSupabaseError(error)\r\n    }\r\n  },\r\n\r\n  /**\r\n   * Get application by ID\r\n   */\r\n  async getById(\r\n    applicationId: string\r\n  ): Promise<QueryResult<Database['public']['Tables']['applications']['Row']>> {\r\n    try {\r\n      const supabase = await createClient()\r\n      const { data, error } = await supabase\r\n        .from('applications')\r\n        .select('*')\r\n        .eq('id', applicationId)\r\n        .maybeSingle()\r\n\r\n      if (error) return handleSupabaseError(error)\r\n      if (!data) return { success: false, error: 'Application not found', code: 'NOT_FOUND' }\r\n      \r\n      return { success: true, data }\r\n    } catch (error: any) {\r\n      return handleSupabaseError(error)\r\n    }\r\n  },\r\n\r\n  /**\r\n   * Update application status\r\n   */\r\n  async updateStatus(\r\n    applicationId: string,\r\n    status: Database['public']['Tables']['applications']['Row']['status']\r\n  ): Promise<QueryResult<Database['public']['Tables']['applications']['Row']>> {\r\n    try {\r\n      const supabase = await createClient()\r\n      const updateData: any = { status }\r\n      \r\n      if (status === 'submitted') {\r\n        updateData.submitted_at = new Date().toISOString()\r\n      } else if (status === 'approved' || status === 'rejected') {\r\n        updateData.reviewed_at = new Date().toISOString()\r\n      }\r\n\r\n      const { data, error } = await supabase\r\n        .from('applications')\r\n        .update(updateData)\r\n        .eq('id', applicationId)\r\n        .select()\r\n        .single()\r\n\r\n      if (error) return handleSupabaseError(error)\r\n      if (!data) return { success: false, error: 'Application not found', code: 'NOT_FOUND' }\r\n      \r\n      return { success: true, data }\r\n    } catch (error: any) {\r\n      return handleSupabaseError(error)\r\n    }\r\n  }\r\n}\r\n\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 667, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/liqui/OneDrive/Desktop/ai-funding-platform/lib/validations/schemas.ts"],"sourcesContent":["// Zod validation schemas for all input types\r\n// These provide runtime validation and type inference\r\n\r\nimport { z } from 'zod'\r\n\r\n// ============================================================================\r\n// USER PROFILE VALIDATION\r\n// ============================================================================\r\n\r\n/**\r\n * Funding requirements schema\r\n */\r\nexport const fundingRequirementsSchema = z.object({\r\n  amount_needed: z.number().min(0, 'Funding amount must be positive'),\r\n  funding_purpose: z.string().min(10, 'Funding purpose must be at least 10 characters').max(2000),\r\n  business_stage: z.enum(['startup', 'growth', 'expansion', 'mature'], {\r\n    errorMap: () => ({ message: 'Business stage must be one of: startup, growth, expansion, mature' })\r\n  }),\r\n  industry_sector: z.array(z.string()).min(1, 'At least one industry sector is required'),\r\n  preferred_funding_type: z.array(z.string()).min(1, 'At least one funding type is required')\r\n})\r\n\r\n/**\r\n * User profile schema for create/update operations\r\n */\r\nexport const userProfileSchema = z.object({\r\n  company_name: z.string()\r\n    .min(1, 'Company name is required')\r\n    .max(255, 'Company name must be less than 255 characters')\r\n    .trim(),\r\n  registration_number: z.string()\r\n    .min(1, 'Registration number is required')\r\n    .max(100, 'Registration number must be less than 100 characters')\r\n    .trim(),\r\n  industry: z.string()\r\n    .min(1, 'Industry is required')\r\n    .max(100, 'Industry must be less than 100 characters')\r\n    .trim(),\r\n  business_description: z.string()\r\n    .min(10, 'Business description must be at least 10 characters')\r\n    .max(2000, 'Business description must be less than 2000 characters')\r\n    .trim(),\r\n  annual_revenue: z.number()\r\n    .min(0, 'Annual revenue must be positive')\r\n    .max(999999999999999, 'Annual revenue is too large'),\r\n  employees_count: z.number()\r\n    .int('Employee count must be a whole number')\r\n    .min(0, 'Employee count must be non-negative')\r\n    .max(1000000, 'Employee count is too large'),\r\n  years_in_business: z.number()\r\n    .int('Years in business must be a whole number')\r\n    .min(0, 'Years in business must be non-negative')\r\n    .max(200, 'Years in business is too large'),\r\n  location: z.string()\r\n    .min(1, 'Location is required')\r\n    .max(255, 'Location must be less than 255 characters')\r\n    .trim(),\r\n  funding_requirements: fundingRequirementsSchema\r\n})\r\n\r\n/**\r\n * Partial update schema (all fields optional)\r\n */\r\nexport const userProfileUpdateSchema = userProfileSchema.partial()\r\n\r\n/**\r\n * Inferred types from schemas\r\n */\r\nexport type UserProfileInput = z.infer<typeof userProfileSchema>\r\nexport type UserProfileUpdateInput = z.infer<typeof userProfileUpdateSchema>\r\nexport type FundingRequirementsInput = z.infer<typeof fundingRequirementsSchema>\r\n\r\n// ============================================================================\r\n// USER REGISTRATION VALIDATION\r\n// ============================================================================\r\n\r\nexport const userRegistrationSchema = z.object({\r\n  email: z.string()\r\n    .email('Invalid email address')\r\n    .max(255, 'Email must be less than 255 characters')\r\n    .toLowerCase()\r\n    .trim(),\r\n  password: z.string()\r\n    .min(8, 'Password must be at least 8 characters')\r\n    .max(100, 'Password must be less than 100 characters')\r\n    .regex(/[A-Z]/, 'Password must contain at least one uppercase letter')\r\n    .regex(/[a-z]/, 'Password must contain at least one lowercase letter')\r\n    .regex(/[0-9]/, 'Password must contain at least one number'),\r\n  firstName: z.string()\r\n    .min(1, 'First name is required')\r\n    .max(100, 'First name must be less than 100 characters')\r\n    .trim(),\r\n  lastName: z.string()\r\n    .min(1, 'Last name is required')\r\n    .max(100, 'Last name must be less than 100 characters')\r\n    .trim(),\r\n  phone: z.string()\r\n    .regex(/^\\+?[1-9]\\d{1,14}$/, 'Invalid phone number format')\r\n    .max(20, 'Phone number must be less than 20 characters')\r\n    .trim(),\r\n  role: z.enum(['smme', 'admin']).default('smme')\r\n})\r\n\r\nexport type UserRegistrationInput = z.infer<typeof userRegistrationSchema>\r\n\r\n// ============================================================================\r\n// APPLICATION VALIDATION\r\n// ============================================================================\r\n\r\nexport const applicationSchema = z.object({\r\n  opportunity_id: z.string().uuid('Invalid opportunity ID'),\r\n  match_id: z.string().uuid('Invalid match ID').optional().nullable(),\r\n  status: z.enum(['draft', 'in_review', 'submitted', 'approved', 'rejected']).default('draft'),\r\n  form_data: z.record(z.any()).default({}),\r\n  signature: z.string().min(1, 'Signature is required').optional()\r\n})\r\n\r\nexport const applicationUpdateSchema = z.object({\r\n  status: z.enum(['draft', 'in_review', 'submitted', 'approved', 'rejected']).optional(),\r\n  form_data: z.record(z.any()).optional(),\r\n  signature: z.string().optional(),\r\n  outcome: z.enum(['approved', 'rejected']).optional(),\r\n  outcome_reason: z.string().optional()\r\n})\r\n\r\nexport type ApplicationInput = z.infer<typeof applicationSchema>\r\nexport type ApplicationUpdateInput = z.infer<typeof applicationUpdateSchema>\r\n\r\n// ============================================================================\r\n// FUNDING OPPORTUNITY VALIDATION\r\n// ============================================================================\r\n\r\nexport const fundingOpportunitySchema = z.object({\r\n  funder_name: z.string()\r\n    .min(1, 'Funder name is required')\r\n    .max(255, 'Funder name must be less than 255 characters')\r\n    .trim(),\r\n  program_name: z.string()\r\n    .min(1, 'Program name is required')\r\n    .max(255, 'Program name must be less than 255 characters')\r\n    .trim(),\r\n  description: z.string()\r\n    .min(10, 'Description must be at least 10 characters')\r\n    .max(5000, 'Description must be less than 5000 characters')\r\n    .trim(),\r\n  amount_range_min: z.number()\r\n    .min(0, 'Minimum amount must be positive')\r\n    .max(999999999999999, 'Amount is too large'),\r\n  amount_range_max: z.number()\r\n    .min(0, 'Maximum amount must be positive')\r\n    .max(999999999999999, 'Amount is too large'),\r\n  eligibility_criteria: z.array(z.string())\r\n    .min(1, 'At least one eligibility criterion is required')\r\n    .max(50, 'Too many eligibility criteria'),\r\n  application_url: z.string()\r\n    .url('Invalid application URL')\r\n    .max(500, 'URL must be less than 500 characters'),\r\n  deadline: z.string()\r\n    .datetime('Invalid deadline format (must be ISO 8601)')\r\n    .refine((date) => new Date(date) > new Date(), {\r\n      message: 'Deadline must be in the future'\r\n    }),\r\n  industry_focus: z.array(z.string())\r\n    .min(1, 'At least one industry focus is required')\r\n    .max(50, 'Too many industry focuses'),\r\n  funding_type: z.string()\r\n    .min(1, 'Funding type is required')\r\n    .max(100, 'Funding type must be less than 100 characters')\r\n    .trim(),\r\n  requirements: z.array(z.string())\r\n    .min(1, 'At least one requirement is required')\r\n    .max(50, 'Too many requirements')\r\n}).refine((data) => data.amount_range_max >= data.amount_range_min, {\r\n  message: 'Maximum amount must be greater than or equal to minimum amount',\r\n  path: ['amount_range_max']\r\n})\r\n\r\nexport type FundingOpportunityInput = z.infer<typeof fundingOpportunitySchema>\r\n\r\n// ============================================================================\r\n// MATCH VALIDATION\r\n// ============================================================================\r\n\r\nexport const matchSchema = z.object({\r\n  user_id: z.string().uuid('Invalid user ID'),\r\n  opportunity_id: z.string().uuid('Invalid opportunity ID'),\r\n  match_score: z.number()\r\n    .int('Match score must be a whole number')\r\n    .min(0, 'Match score must be between 0 and 100')\r\n    .max(100, 'Match score must be between 0 and 100'),\r\n  match_reasons: z.array(z.string())\r\n    .min(1, 'At least one match reason is required')\r\n    .max(20, 'Too many match reasons'),\r\n  status: z.enum(['new', 'viewed', 'interested', 'applied']).default('new')\r\n})\r\n\r\nexport type MatchInput = z.infer<typeof matchSchema>\r\n\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 793, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/liqui/OneDrive/Desktop/ai-funding-platform/app/actions/user-profiles.ts"],"sourcesContent":["'use server'\r\n\r\nimport { getServerSession } from '@/lib/supabase/auth-helpers'\r\nimport { userProfileQueries } from '@/lib/db/queries'\r\nimport { userProfileSchema, userProfileUpdateSchema, validateWithZod } from '@/lib/validations/schemas'\r\nimport type { FundingRequirements } from '@/lib/db-schema'\r\nimport type { UserProfileResponse } from './types'\r\n\r\n/**\r\n * Input type for creating/updating user profile\r\n * @deprecated Use UserProfileInput from lib/validations/schemas instead\r\n * Kept for backward compatibility\r\n */\r\nexport interface UserProfileInput {\r\n  company_name: string\r\n  registration_number: string\r\n  industry: string\r\n  business_description: string\r\n  annual_revenue: number\r\n  employees_count: number\r\n  years_in_business: number\r\n  location: string\r\n  funding_requirements: FundingRequirements\r\n}\r\n\r\n// Re-export for convenience\r\nexport type { UserProfileInput as UserProfileInputType } from '@/lib/validations/schemas'\r\nexport type { UserProfileResponse }\r\n\r\n/**\r\n * Get user's profile from database\r\n */\r\nexport async function getUserProfile(): Promise<UserProfileResponse> {\r\n  try {\r\n    // Check authentication\r\n    const user = await getServerSession()\r\n    if (!user) {\r\n      return { success: false, error: 'Authentication required. Please log in.' }\r\n    }\r\n\r\n    // Use optimized query helper\r\n    const result = await userProfileQueries.getByUserId(user.id)\r\n    return result\r\n  } catch (error: any) {\r\n    // Check if this is a Next.js redirect error - if so, re-throw it\r\n    if (error && typeof error === 'object' && 'digest' in error && error.digest?.startsWith('NEXT_REDIRECT')) {\r\n      throw error\r\n    }\r\n    console.error('Error in getUserProfile:', error)\r\n    return { success: false, error: error.message || 'Failed to fetch profile' }\r\n  }\r\n}\r\n\r\n/**\r\n * Create a new user profile\r\n */\r\nexport async function createUserProfile(input: UserProfileInput): Promise<UserProfileResponse> {\r\n  try {\r\n    // Validate input with Zod\r\n    const validation = validateWithZod(userProfileSchema, input)\r\n    if (!validation.success) {\r\n      return { success: false, error: validation.error }\r\n    }\r\n\r\n    // Check authentication\r\n    const user = await getServerSession()\r\n    if (!user) {\r\n      return { success: false, error: 'Authentication required. Please log in.' }\r\n    }\r\n\r\n    // Use optimized query helper\r\n    const result = await userProfileQueries.upsert(user.id, validation.data)\r\n    return result\r\n  } catch (error: any) {\r\n    // Check if this is a Next.js redirect error - if so, re-throw it\r\n    if (error && typeof error === 'object' && 'digest' in error && error.digest?.startsWith('NEXT_REDIRECT')) {\r\n      throw error\r\n    }\r\n    console.error('Error in createUserProfile:', error)\r\n    return { success: false, error: error.message || 'Failed to create profile' }\r\n  }\r\n}\r\n\r\n/**\r\n * Update existing user profile\r\n */\r\nexport async function updateUserProfile(input: Partial<UserProfileInput>): Promise<UserProfileResponse> {\r\n  try {\r\n    // Validate input with Zod (partial schema)\r\n    const validation = validateWithZod(userProfileUpdateSchema, input)\r\n    if (!validation.success) {\r\n      return { success: false, error: validation.error }\r\n    }\r\n\r\n    // Check authentication\r\n    const user = await getServerSession()\r\n    if (!user) {\r\n      return { success: false, error: 'Authentication required. Please log in.' }\r\n    }\r\n\r\n    // Check if profile exists\r\n    const existingResult = await userProfileQueries.getByUserId(user.id)\r\n    \r\n    if (existingResult.success && existingResult.data) {\r\n      // Update existing profile\r\n      const result = await userProfileQueries.update(user.id, validation.data)\r\n      return result\r\n    } else {\r\n      // Create new profile if doesn't exist (upsert behavior)\r\n      const result = await userProfileQueries.upsert(user.id, validation.data)\r\n      return result\r\n    }\r\n  } catch (error: any) {\r\n    // Check if this is a Next.js redirect error - if so, re-throw it\r\n    if (error && typeof error === 'object' && 'digest' in error && error.digest?.startsWith('NEXT_REDIRECT')) {\r\n      throw error\r\n    }\r\n    console.error('Error in updateUserProfile:', error)\r\n    return { success: false, error: error.message || 'Failed to update profile' }\r\n  }\r\n}\r\n\r\n/**\r\n * Upsert user profile (create or update in one operation)\r\n * This is the recommended method as it handles both cases automatically\r\n */\r\nexport async function upsertUserProfile(input: UserProfileInput): Promise<UserProfileResponse> {\r\n  try {\r\n    // Validate input with Zod\r\n    const validation = validateWithZod(userProfileSchema, input)\r\n    if (!validation.success) {\r\n      return { success: false, error: validation.error }\r\n    }\r\n\r\n    // Check authentication\r\n    const user = await getServerSession()\r\n    if (!user) {\r\n      return { success: false, error: 'Authentication required. Please log in.' }\r\n    }\r\n\r\n    // Use optimized query helper\r\n    const result = await userProfileQueries.upsert(user.id, validation.data)\r\n    return result\r\n  } catch (error: any) {\r\n    // Check if this is a Next.js redirect error - if so, re-throw it\r\n    if (error && typeof error === 'object' && 'digest' in error && error.digest?.startsWith('NEXT_REDIRECT')) {\r\n      throw error\r\n    }\r\n    console.error('Error in upsertUserProfile:', error)\r\n    return { success: false, error: error.message || 'Failed to save profile' }\r\n  }\r\n}\r\n\r\n/**\r\n * Check if user profile is complete (has all required onboarding data)\r\n * Returns true if all required fields are filled, false otherwise\r\n */\r\nexport async function isProfileComplete(): Promise<boolean> {\r\n  try {\r\n    // Check authentication\r\n    const user = await getServerSession()\r\n    if (!user) {\r\n      return false\r\n    }\r\n\r\n    // Use optimized query helper\r\n    return await userProfileQueries.isComplete(user.id)\r\n  } catch (error: any) {\r\n    console.error('Error checking profile completion:', error)\r\n    // On error, assume incomplete to be safe\r\n    return false\r\n  }\r\n}\r\n\r\n"],"names":[],"mappings":";;;;;;;;;;;;;AAEA;AACA;AACA;;;;;;AA4BO,eAAe;IACpB,IAAI;QACF,uBAAuB;QACvB,MAAM,OAAO,MAAM,IAAA,sJAAgB;QACnC,IAAI,CAAC,MAAM;YACT,OAAO;gBAAE,SAAS;gBAAO,OAAO;YAA0C;QAC5E;QAEA,6BAA6B;QAC7B,MAAM,SAAS,MAAM,0IAAkB,CAAC,WAAW,CAAC,KAAK,EAAE;QAC3D,OAAO;IACT,EAAE,OAAO,OAAY;QACnB,iEAAiE;QACjE,IAAI,SAAS,OAAO,UAAU,YAAY,YAAY,SAAS,MAAM,MAAM,EAAE,WAAW,kBAAkB;YACxG,MAAM;QACR;QACA,QAAQ,KAAK,CAAC,4BAA4B;QAC1C,OAAO;YAAE,SAAS;YAAO,OAAO,MAAM,OAAO,IAAI;QAA0B;IAC7E;AACF;AAKO,eAAe,kBAAkB,KAAuB;IAC7D,IAAI;QACF,0BAA0B;QAC1B,MAAM,aAAa,IAAA,gJAAe,EAAC,kJAAiB,EAAE;QACtD,IAAI,CAAC,WAAW,OAAO,EAAE;YACvB,OAAO;gBAAE,SAAS;gBAAO,OAAO,WAAW,KAAK;YAAC;QACnD;QAEA,uBAAuB;QACvB,MAAM,OAAO,MAAM,IAAA,sJAAgB;QACnC,IAAI,CAAC,MAAM;YACT,OAAO;gBAAE,SAAS;gBAAO,OAAO;YAA0C;QAC5E;QAEA,6BAA6B;QAC7B,MAAM,SAAS,MAAM,0IAAkB,CAAC,MAAM,CAAC,KAAK,EAAE,EAAE,WAAW,IAAI;QACvE,OAAO;IACT,EAAE,OAAO,OAAY;QACnB,iEAAiE;QACjE,IAAI,SAAS,OAAO,UAAU,YAAY,YAAY,SAAS,MAAM,MAAM,EAAE,WAAW,kBAAkB;YACxG,MAAM;QACR;QACA,QAAQ,KAAK,CAAC,+BAA+B;QAC7C,OAAO;YAAE,SAAS;YAAO,OAAO,MAAM,OAAO,IAAI;QAA2B;IAC9E;AACF;AAKO,eAAe,kBAAkB,KAAgC;IACtE,IAAI;QACF,2CAA2C;QAC3C,MAAM,aAAa,IAAA,gJAAe,EAAC,wJAAuB,EAAE;QAC5D,IAAI,CAAC,WAAW,OAAO,EAAE;YACvB,OAAO;gBAAE,SAAS;gBAAO,OAAO,WAAW,KAAK;YAAC;QACnD;QAEA,uBAAuB;QACvB,MAAM,OAAO,MAAM,IAAA,sJAAgB;QACnC,IAAI,CAAC,MAAM;YACT,OAAO;gBAAE,SAAS;gBAAO,OAAO;YAA0C;QAC5E;QAEA,0BAA0B;QAC1B,MAAM,iBAAiB,MAAM,0IAAkB,CAAC,WAAW,CAAC,KAAK,EAAE;QAEnE,IAAI,eAAe,OAAO,IAAI,eAAe,IAAI,EAAE;YACjD,0BAA0B;YAC1B,MAAM,SAAS,MAAM,0IAAkB,CAAC,MAAM,CAAC,KAAK,EAAE,EAAE,WAAW,IAAI;YACvE,OAAO;QACT,OAAO;YACL,wDAAwD;YACxD,MAAM,SAAS,MAAM,0IAAkB,CAAC,MAAM,CAAC,KAAK,EAAE,EAAE,WAAW,IAAI;YACvE,OAAO;QACT;IACF,EAAE,OAAO,OAAY;QACnB,iEAAiE;QACjE,IAAI,SAAS,OAAO,UAAU,YAAY,YAAY,SAAS,MAAM,MAAM,EAAE,WAAW,kBAAkB;YACxG,MAAM;QACR;QACA,QAAQ,KAAK,CAAC,+BAA+B;QAC7C,OAAO;YAAE,SAAS;YAAO,OAAO,MAAM,OAAO,IAAI;QAA2B;IAC9E;AACF;AAMO,eAAe,kBAAkB,KAAuB;IAC7D,IAAI;QACF,0BAA0B;QAC1B,MAAM,aAAa,IAAA,gJAAe,EAAC,kJAAiB,EAAE;QACtD,IAAI,CAAC,WAAW,OAAO,EAAE;YACvB,OAAO;gBAAE,SAAS;gBAAO,OAAO,WAAW,KAAK;YAAC;QACnD;QAEA,uBAAuB;QACvB,MAAM,OAAO,MAAM,IAAA,sJAAgB;QACnC,IAAI,CAAC,MAAM;YACT,OAAO;gBAAE,SAAS;gBAAO,OAAO;YAA0C;QAC5E;QAEA,6BAA6B;QAC7B,MAAM,SAAS,MAAM,0IAAkB,CAAC,MAAM,CAAC,KAAK,EAAE,EAAE,WAAW,IAAI;QACvE,OAAO;IACT,EAAE,OAAO,OAAY;QACnB,iEAAiE;QACjE,IAAI,SAAS,OAAO,UAAU,YAAY,YAAY,SAAS,MAAM,MAAM,EAAE,WAAW,kBAAkB;YACxG,MAAM;QACR;QACA,QAAQ,KAAK,CAAC,+BAA+B;QAC7C,OAAO;YAAE,SAAS;YAAO,OAAO,MAAM,OAAO,IAAI;QAAyB;IAC5E;AACF;AAMO,eAAe;IACpB,IAAI;QACF,uBAAuB;QACvB,MAAM,OAAO,MAAM,IAAA,sJAAgB;QACnC,IAAI,CAAC,MAAM;YACT,OAAO;QACT;QAEA,6BAA6B;QAC7B,OAAO,MAAM,0IAAkB,CAAC,UAAU,CAAC,KAAK,EAAE;IACpD,EAAE,OAAO,OAAY;QACnB,QAAQ,KAAK,CAAC,sCAAsC;QACpD,yCAAyC;QACzC,OAAO;IACT;AACF;;;IA5IsB;IAwBA;IA8BA;IAwCA;IA+BA;;AA7HA,8WAAA;AAwBA,8WAAA;AA8BA,8WAAA;AAwCA,8WAAA;AA+BA,8WAAA"}},
    {"offset": {"line": 978, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/liqui/OneDrive/Desktop/ai-funding-platform/.next-internal/server/app/pending-approval/page/actions.js%20%28server%20actions%20loader%29"],"sourcesContent":["export {createUserRecord as '60b59951fd5143ab30439d8982ae3ae4d3d966f67f'} from 'ACTIONS_MODULE0'\nexport {isProfileComplete as '00bb7fc876b5d429ebf45c202731d453991d49206f'} from 'ACTIONS_MODULE1'\n"],"names":[],"mappings":";AAAA;AACA"}}]
}